{% extends "layout.html" %}

{% from 'macros.html' import process_tags with context %}

{% block content %}
<section>
    <div class="container">
        <div class="entry-list single">
            <article>
                    <h2>{{ id.title}}</h2>
                    {% set user = models.User.get(models.User.id==id.user_id) %}
                    <div class="small">
                        By <a class="small" style="text-decoration:none;" 
                            href="{{ url_for('user', id=id.user_id) }}">
                            {{ user.username }}</a>, 
                        {{ id.date.strftime('%B %d %I:%M %p') }}
                    </div>
                        <p class="entry">
                        <br>
                        {% for item in id.learned.split('\n') %}
                            <p>{{ item }}</p>
                        {% endfor %}
                        </p>
                    {% if id.remember != " " and id.remember != "": %}
                        <p><u>Resources to Remember:</u><br>
                            {% for item in id.remember.split('\n') %}
                                {% if "http" in item or "www" in item: %}
                                    {{ item|urlize(40, True, target="_blank") }}<br>
                                {% else: %}
                                    {{ item }} <br>
                                {% endif %}
                            {% endfor %}
                        </p>
                    {% endif %}
                    {{ process_tags(tags) }}
            </article>
        </div>
    </div>
    <div class="edit">
        <p>
            {% if id.user_id == current_user.id %}
                <a href="{{ url_for('edit', id=id.id) }}">Edit Entry</a>
                <a href="{{ url_for('delete_entry', id=id.id) }}">Delete Entry</a>
            {% endif %}
        </p>
    </div>
</section>
{% endblock %}