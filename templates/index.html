{% extends "layout.html" %}

{% from 'macros.html' import emoji_menu, relative_time, write_comments, 
    process_tags, edit_entry, write_entry with context %}

{% block content %}

{% if current_user.is_authenticated %}
<section>
    <div class="new-entry-container" style="visibility: hidden;">
        <iframe id="new-entry-frame" 
        class="new-entry-frame shadow-box" 
        src="{{ url_for('create')}}" 
        frameBorder="0">
            <div class="new-entry-cancel-button shadow-box material-icons">cancel</div>
        </iframe>
    </div>
</section>
<section>
    <div class="edit-entry-container" style="visibility: hidden;">
        <iframe id="edit-entry-frame" 
        class="edit-entry-frame shadow-box" 
        name="edit-frame"
        src="" 
        frameBorder="0">
            <div class="edit-entry-cancel-button shadow-box material-icons">cancel</div>
        </iframe>
    </div>
</section>
<section>
    <!-- <div id="emoji-bg" class="emoji-menu-bg" style="visibility: hidden"></div> -->
    <div class="container">
        <div class="top-recent">
            <select id="top-recent-select">
                <option value="recent">Recent Posts</option>
                <option value="top">Top Posts</option>
            </select>
        </div>
        <div class="new-entry-open">
            <img class="avatar-30" src="{{ current_user.avatar }}">
            <input class="entry-open-dummy" type="text" placeholder="" disabled>
        </div>
        <div class="entry-list">

                <!-- ENTRY PREVIEW -->

                {% for entry in journal %}
                    {{ write_entry(entry) }}
                {% endfor %}
                
            </div>
        </div>
    </section>
    {{ emoji_menu(emoji) }}
    <!-- <script type="text/javascript">
        console.log(`
        Greetings!
        
        This mock social media site uses the Flask framework, jinja2 templating engine, and JavaScript!
        
        The code is available at:
        https://github.com/guy-lorshbaugh/cohort-social-learning
        
        Thank you for viewing my project! If you'd like to reach out, feel free to shoot me a line at guy.lorshbaugh@gmail.com`
        )
    </script> -->
    <script src="{{ url_for('static', filename='script/caret.js') }}"></script>
    <script type="text/javascript" 
        src="{{ url_for('static', filename='script/get-id.js') }}">
    </script>
    <script src="{{ url_for('static', filename='script/entry-tags.js') }}"></script>
    <script src="{{ url_for('static', filename='script/top-recent.js') }}"></script>
    <script src="{{ url_for('static', filename='script/form-error.js') }}"></script>
    <script src="{{ url_for('static', filename='script/entry-options.js') }}"></script>
    <script src="{{ url_for('static', filename='script/comment.js') }}"></script>
    <script src="{{ url_for('static', filename='script/like.js') }}"></script>
    <script src="{{ url_for('static', filename='script/entry-new.js') }}"></script>
{% else %}
    {% include 'login.html' %}
{% endif %}
{% endblock %}